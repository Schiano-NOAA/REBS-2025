library(here)
library(r4ss)
library(dplyr)
library(purrr)
library(furrr)
library(ggplot2)
model_directory <- here::here(
'models')
base_model_name <- here::here(
'models',
'base_model'
)
exe_loc <- here::here('models/base_model/ss3')
base_model <- SS_read(base_model_name, ss_new = TRUE)
base_out <- SS_output(base_model_name)
sensi_mod <- base_model
ctl <- sensi_mod$ctl
sensi_mod$ctl$fecundity_option
#base model is 2 (cubic), change it to 1 (linear)
sensi_mod$ctl$fecundity_option <- 1
SS_write(
sensi_mod,
file.path(
model_directory,
'sensitivities',
'proportional_fecundity'
),
overwrite = TRUE
)
library(here)
library(r4ss)
library(dplyr)
library(purrr)
library(furrr)
library(ggplot2)
model_directory <- here::here(
'models')
base_model_name <- here::here(
'models',
'RB_ref_model_updated'
)
base_model <- SS_read(base_model_name, ss_new = TRUE)
sensi_mod <- base_model
sensi_dir <- here::here('models/repro_sensitivities/proportional_fecundity_again')
sensi_mod$start$init_values_src <- 0
#base model fecundity option is 2 (cubic), change it to 1 (linear)
sensi_mod$ctl$fecundity_option <- 1
SS_write(
sensi_mod,
sensi_dir,
overwrite = TRUE
)
r4ss::get_ss3_exe(dir = sensi_dir)
r4ss::run(dir = sensi_dir, show_in_console = TRUE, extras = "-nohess")
test <- sensi_mod$ctl$MG_parms
View(test)
model_directory <- here::here(
'models')
base_model_name <- here::here(
'models',
'RB_ref_model_updated'
)
base_model <- SS_read(base_model_name, ss_new = TRUE)
sensi_mod <- base_model
sensi_dir <- here::here('models/repro_sensitivities/proportional_fecundity')
sensi_mod$start$init_values_src <- 0
#base model fecundity option is 2 (cubic), change it to 1 (linear)
sensi_mod$ctl$fecundity_option <- 1
#change a to 1, b to 0
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT <- 1
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$PRIOR <- 1
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT <- 0
sensi_mod$ctl$MG_parms["Eggs_beta_Fem_GP_1", ]$PRIOR <- 0
SS_write(
sensi_mod,
sensi_dir,
overwrite = TRUE
)
r4ss::get_ss3_exe(dir = sensi_dir)
r4ss::run(dir = sensi_dir, show_in_console = TRUE, extras = "-nohess")
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT
#change a to 1, b to 0
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT <- 1
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT <- 0
base_model <- SS_read(base_model_name, ss_new = TRUE)
base_model_name
sensi_mod <- base_model
sensi_dir <- here::here('models/repro_sensitivities/proportional_fecundity')
sensi_mod$start$init_values_src <- 0
#base model fecundity option is 2 (cubic), change it to 1 (linear)
sensi_mod$ctl$fecundity_option <- 1
#change a to 1, b to 0
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$INIT <- 1
sensi_mod$ctl$MG_parms["Eggs_alpha_Fem_GP_1", ]$PRIOR <- 1
sensi_mod$ctl$MG_parms["Eggs_beta_Fem_GP_1", ]$INIT <- 0
sensi_mod$ctl$MG_parms["Eggs_beta_Fem_GP_1", ]$PRIOR <- 0
SS_write(
sensi_mod,
sensi_dir,
overwrite = TRUE
)
r4ss::get_ss3_exe(dir = sensi_dir)
r4ss::run(dir = sensi_dir, show_in_console = TRUE, extras = "-nohess")
here::here('models','RB_ref_model_updated')
(here::here('models/repro_sensitivities/proportional_fecundity')
)
models <- c(paste0(here::here('models/RB_ref_model_updated')),
paste0(here::here('models/repro_sensitivities/proportional_fecundity')))
models
models_output <- SSgetoutput(dirvec = models)
models_summary <- SSsummarize(models_output)
SSplotComparisons(models_summary,
plotdir = here::here("Rcode", "SSplotComparisons_output", "sensitivities",
"1_proportional_fecundity"),
legendlabels = c("2025 base model", "Proportional fecundity"),
print = TRUE
)
here::here('models/RB_ref_model_updated')
paste0(here::here('models/RB_ref_model_updated'))
